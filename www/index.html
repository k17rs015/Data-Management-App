<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="keys.js"></script>
    <script>
      var ncmb = new NCMB(appKey, clientKey);
      var UTdata = ncmb.DataStore("Test1");
      var key = "HP";
      var key1 = "A";
      var key2 = "B";
      var key3 = "C";
      var key4 = "D";
      var key5 = "S";
      var key6 = "name";

      function enterData() {
        var uTdata = new UTdata();
        var value = parseInt($("#HP").val());
        var value1 = parseInt($("#A").val());
        var value2 = parseInt($("#B").val());
        var value3 = parseInt($("#C").val());
        var value4 = parseInt($("#D").val());
        var value5 = parseInt($("#S").val());
        var value6 = ($("#name").val());

        uTdata.set(key, value)
        .set(key1, value1)
        .set(key2, value2)
        .set(key3, value3)
        .set(key4, value4)
        .set(key5, value5)
        .set(key6, value6)
        .save()
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("enter success");
        })
        .catch(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("enter fail");
        })
      }

      function fetchAll() {
        UTdata.fetchAll()
        .then(function(results){
          var msg="<table border='1' rules='all' width='100%'>";
          msg += "<tr><th>ニックネーム</th><th>体力</th><th>攻撃</th><th>防御</th><th>特攻</th><th>特坊</th><th>素早さ</th></tr>";
          for(var i=0; i<results.length; i++){
            var name=results[i].get("name");
            var HP=results[i].get("HP");
            var A=results[i].get("A");
            var B=results[i].get("B");
            var C=results[i].get("C");
            var D=results[i].get("D");
            var S=results[i].get("S");
            msg += "<tr><td>" + name + "</td><td>" + HP + "</td><td>" + A + "</td><td>" + B + "</td><td>" + C + "</td><td>" + D + "</td><td>" + S + "</td></tr>";
          }
          msg += "</table>";
          $("#display").removeClass();
          $("#display").addClass("text-dark");
          $("#display").addClass("bg-light");
          $("#display").html(msg);
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })
      }

      function deleteData() {
        UTdata.fetch()
        .then(function(uTdata){
          return uTdata.delete();
        })
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("delete success");
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })
      }

      function countData() {
        UTdata.count().fetchAll()
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html(results.count);
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("count fail:" + JSON.stringify(error));
        })
      }

      
      
    </script>
</head>
<body>
  <h1>データ管理アプリ</h1>
  <div class="form-row">

  <div class="form-group col-10">
    <label>ニックネーム</label>
    <input type="text" class="form-control" id="name" placeholder="ニックネーム" required="required">
  </div>
  </div>

  <div class="form-row">
    <div class="form-group col-2">
      <label for="HP">体力</label>
      <input type="number" class="form-control" id="HP" placeholder="0"  required="required"> 
    </div>
    <div class="form-group col-2">
      <label for="A">攻撃</label>
      <input type="number" class="form-control" id="A" placeholder="0"  required="required"> 
    </div>
    <div class="form-group col-2">
      <label for="B">防御</label>
      <input type="number" class="form-control" id="B" placeholder="0"  required="required"> 
    </div>
    <div class="form-group col-2">
      <label for="C">特攻</label>
      <input type="number" class="form-control" id="C" placeholder="0"  required="required">
    </div>
    <div class="form-group col-2">
      <label for="D">特防</label>
      <input type="number" class="form-control" id="D" placeholder="0" required="required">
    </div>
    <div class="form-group col-2"> 
      <label for="S">素早さ</label>
      <input type="number" class="form-control" id="S" placeholder="0"  required="required"> 
    </div>
  </div>



  <div>
    <a onclick="enterData()" class="btn btn-outline-secondary" role="button" style="width:auto">保存</a>
    <a onclick="fetchAll()" class="btn btn-outline-secondary" role="buton" style="width:auto">表示</a>
    <a onclick="deleteData()" class="btn btn-outline-danger" role="buton" style="width:auto">削除</a>
    <a onclick="countData()" class="btn btn-outline-primary" role="button" style="width:auto">カウント</a>
  </div>

  <div id="display" class="text-light bg-info" style="width:auto">
    Results
  </div>
  
</body>
</html>
