<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="keys.js"></script>
    <script>
      var ncmb = new NCMB(appKey, clientKey);
      var UTdata = ncmb.DataStore("Test1");
      var key = "HP";
      var key1 = "A";
      var key2 = "B";
      var key3 = "C";
      var key4 = "D";
      var key5 = "S";

      function enterData() {
        var uTdata = new UTdata();
        var value = parseInt($("#HP").val());
        var value1 = parseInt($("#A").val());
        var value2 = parseInt($("#B").val());
        var value3 = parseInt($("#C").val());
        var value4 = parseInt($("#D").val());
        var value5 = parseInt($("#S").val());

        uTdata.set(key, value)
        .set(key1, value1)
        .set(key2, value2)
        .set(key3, value3)
        .set(key4, value4)
        .set(key5, value5)
        .save()
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("enter success");
        })
        .catch(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("enter fail");
        })
      }

      function fetchAll() {
        UTdata.fetchAll()
        .then(function(results){
          var msg="<table border='1' rules='all' width='100%'>";
          msg += "<tr><th>体力</th><th>攻撃</th><th>防御</th><th>特攻</th><th>特坊</th><th>素早さ</th></tr>";
          for(var i=0; i<results.length; i++){
            var HP=results[i].get("HP");
            var A=results[i].get("A");
            var B=results[i].get("B");
            var C=results[i].get("C");
            var D=results[i].get("D");
            var S=results[i].get("S");
            msg += "<tr><td>" + HP + "</td><td>" + A + "</td><td>" + B + "</td><td>" + C + "</td><td>" + D + "</td><td>" + S + "</td></tr>";
          }
          msg += "</table>";
          $("#display").removeClass();
          $("#display").addClass("text-dark");
          $("#display").addClass("bg-light");
          $("#display").html(msg);
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })
      }

      function deleteData() {
        UTdata.fetch()
        .then(function(uTdata){
          return uTdata.delete();
        })
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("delete success");
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })
      }


      
      
    </script>
</head>
<body>
  <h1>データ管理アプリ</h1>
  <div>
    <label>ニックネーム</label>
  </div>
  <div class="form-group">
    <input type="text" id="name" placeholder="ニックネーム" size="">
  </div>
  <div>
    <label>体力　</label>
    <label>攻撃　</label>
    <label>防御　</label>
    <label>特攻　</label>
    <label>特防　</label>
    <label>素早さ　</label>
  </div>
  <div class="form-group">
    <input type="number" id="HP" placeholder="0" style="width:45px"> 
    <label> </label>
    <input type="number" id="A" placeholder="0" style="width:45px"> 
    <label> </label>
    <input type="number" id="B" placeholder="0" style="width:45px"> 
    <label> </label>
    <input type="number" id="C" placeholder="0" style="width:45px">
    <label> </label>
    <input type="number" id="D" placeholder="0" style="width:45px"> 
    <label> </label>
    <input type="number" id="S" placeholder="0" style="width:45px"> 
  </div>
  <div>
    <a onclick="enterData()" class="btn btn-outline-secondary" role="button" style="width:100px">Enter</a>
  </div> 
  <div>
    <a onclick="fetchAll()" class="btn btn-outline-secondary" role="buton">Fetch All</a>
    <a onclick="deleteData()" class="btn btn-outline-primary" role="buton">Delete</a>
    <a onclick="countData()" class="btn btn-outline-primary" role="button">Count</a>
    <a onclick="sortData()" class="btn btn-outline-primary" role="button">Sort</a>
  </div>

  <div id="display" class="text-light bg-info">
    Results
  </div>
  
</body>
</html>
