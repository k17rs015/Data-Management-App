<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="keys.js"></script>
    <script>
      var ncmb = new NCMB(appKey, clientKey);
      var UTdata = ncmb.DataStore("Test1");
      var key = "HP";
      var key1 = "A";
      var key2 = "B";
      var key3 = "C";
      var key4 = "D";
      var key5 = "S";
      var key6 = "name";
      var key7 = "level";
      var key8 = "memo";

      function enterData() {
        var uTdata = new UTdata();
        var value = parseInt($("#HP").val());
        var value1 = parseInt($("#A").val());
        var value2 = parseInt($("#B").val());
        var value3 = parseInt($("#C").val());
        var value4 = parseInt($("#D").val());
        var value5 = parseInt($("#S").val());
        var value6 = $("#name").val();
        var value7 = $("#level").val();
        var value8 = $("#memo").val();

        uTdata.set(key, value)
        .set(key1, value1)
        .set(key2, value2)
        .set(key3, value3)
        .set(key4, value4)
        .set(key5, value5)
        .set(key6, value6)
        .set(key7, value7)
        .set(key8, value8)
        .save()
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("enter success");
        })
        .catch(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("enter fail");
        })
      }

      function fetchAll() {
        UTdata.fetchAll()
        .then(function(results){
          var msg="<table border='1' rules='all' width='100%'>";
          msg += "<tr><th>ニックネーム</th><th>レベル</th><th>体力</th><th>攻撃</th><th>防御</th><th>特攻</th><th>特坊</th><th>素早さ</th></tr>";
          for(var i=0; i<results.length; i++){
            var name=results[i].get("name");
            var level=results[i].get("level");
            var HP=results[i].get("HP");
            var A=results[i].get("A");
            var B=results[i].get("B");
            var C=results[i].get("C");
            var D=results[i].get("D");
            var S=results[i].get("S");
            msg += "<tr><td>" + name + "</td><td>" + level + "</td><td>" + HP + "</td><td>" + A + "</td><td>" + B + "</td><td>" + C + "</td><td>" + D + "</td><td>" + S + "</td></tr>";
          }
          msg += "</table>";
          $("#display").removeClass();
          $("#display").addClass("text-dark");
          $("#display").addClass("bg-light");
          $("#display").html(msg);
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })

      }

      function deleteData() {
        UTdata.fetch()
        .then(function(uTdata){
          return uTdata.delete();
        })
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html("delete success");
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("delete fail:" + JSON.stringify(error));
        })
      }

      function countData() {
        UTdata.count().fetchAll()
        .then(function(results){
          $("#display").removeClass();
          $("#display").addClass("bg-success");
          $("#display").html(results.count);
        })
        .catch(function(error){
          $("#display").removeClass();
          $("#display").addClass("bg-warning");
          $("#display").html("count fail:" + JSON.stringify(error));
        })
      }

      
      
    </script>
</head>
<body>
  
  <h1>ポケモン管理アプリ</h1>
  <div class="container-fluid">
    <div class="form-row">
      <div class="form-group col-5">
        <label>ニックネーム</label>
        <input type="text" class="form-control form-control-sm" id="name" placeholder="ピカチュウ" required>
      </div>
      <div class="form-group col-3">
        <label>Lv</label>
        <input type="number" class="form-control form-control-sm" id="level" placeholder="0" required>
      </div>
    </div>
  </div>
  <div class="container">

    <div class="form-row">
      <div class="form-group col-4">
        <label for="HP"><b>体力</b></label>
        <input type="number" class="form-control form-control-sm" id="HP" placeholder="0"  required> 
      </div>
      <div class="form-group col-4">
        <label for="A"><b>攻撃</b></label>
        <input type="number" class="form-control form-control-sm" id="A" placeholder="0"  required> 
      </div>
      <div class="form-group col-4">
        <label for="B"><b>防御</b></label>
        <input type="number" class="form-control form-control-sm" id="B" placeholder="0"  required> 
      </div>
      <div class="form-group col-4">
        <label for="C"><b>特攻</b></label>
        <input type="number" class="form-control form-control-sm" id="C" placeholder="0"  required=>
      </div>
      <div class="form-group col-4">
        <label for="D"><b>特防</b></label>
        <input type="number" class="form-control form-control-sm" id="D" placeholder="0" required>
      </div>
      <div class="form-group col-4"> 
        <label for="S"><b>素早さ</b></label>
        <input type="number" class="form-control form-control-sm" id="S" placeholder="0"  required> 
      </div>
      </div>
      <div class="form-group style="100%"> 
        <label for="memo">メモ</label>
        <textarea class="form-control" id="memo" rows="3" placeholder="0"  required></textarea>
      </div>
  </div>

  <div>
    <a onclick="enterData()" class="btn btn-outline-secondary" role="button" style="width:auto">保存</a>
    <a onclick="fetchAll()" class="btn btn-outline-secondary" role="buton" style="width:auto">表示</a>
    <a onclick="deleteData()" class="btn btn-outline-danger" role="buton" style="width:auto">削除</a>
    <a onclick="countData()" class="btn btn-outline-primary" role="button" style="width:auto">カウント</a>
  </div>

  <div id="display" class="text-light bg-info" width="auto">
    Results
  </div>

</body>
</html>
